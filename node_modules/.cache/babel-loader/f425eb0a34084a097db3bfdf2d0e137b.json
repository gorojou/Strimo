{"ast":null,"code":"var _jsxFileName = \"/home/usuario/Documentos/GitHub/Strimo/src/content/pago/formulario.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport firebase from \"../../utils/firebase\";\nimport { useAuth } from \"../context/authContext\";\nimport qr from \"../images/qr-code-example.png\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register({\n  img,\n  moneda\n}) {\n  _s();\n\n  const history = useHistory();\n  const ref = useRef(null);\n  const wallet = \"6vuw9DbaenYyMjuBDn8bkH3Ny23b4s6mPPLq4dbuxZPDm EVo4TM\";\n  const [precio, setPrecio] = useState(\"\");\n  const preciobtc = \"0.0013 BTC\";\n  const precioeth = \"0.00042 ETH\";\n  const comprobante = \"12345678101\";\n  const {\n    currentUser\n  } = useAuth();\n  useEffect(() => {\n    if (moneda === \"btc\") {\n      setPrecio(preciobtc);\n    } else {\n      setPrecio(precioeth);\n    }\n\n    setTimeout(() => {\n      ref.current.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    }, 500);\n  }, [moneda]);\n\n  const handleSubmit = e => {\n    const createChat = firebase.firestore().collection(\"Chat\");\n    createChat.where(\"comprobante\", \"==\", comprobante).get().then(snapshot => {\n      let match = \"\";\n      snapshot.forEach(doc => {\n        match = doc.data();\n      });\n\n      if (!match) {\n        createChat.add({\n          comprobante: comprobante,\n          integrantes: [currentUser.email]\n        }).then(async doc => {\n          const invitacionDoc = firebase.firestore().collection(\"Invitacion\");\n          await invitacionDoc.add({\n            de: currentUser.email,\n            comprobante: comprobante,\n            usuarioInvitado: \"\",\n            tiempo: firebase.firestore.Timestamp.now().toMillis() + 1000 * 60 * 60 * 5,\n            chatId: doc.id\n          });\n          history.push(`/invitacion/${comprobante}`);\n        });\n      }\n    });\n    e.preventDefault();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-pago\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      alt: \"\",\n      src: img,\n      width: \"100px\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"title\",\n      children: \"Formulario de pago\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"form-layout\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        alt: \"\",\n        src: qr,\n        width: \"250px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: wallet,\n        readOnly: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Precio, {\n        precio: precio\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"Submit\",\n        className: \"primario\",\n        style: {\n          width: \"30%\"\n        },\n        ref: ref,\n        children: \"Entrar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Register, \"omyqcYoZ7XXokZ3QJHsYJCd417s=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c = Register;\n\nconst Precio = ({\n  precio\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"precio\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Precio: \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: precio\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = Precio;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Register\");\n$RefreshReg$(_c2, \"Precio\");","map":{"version":3,"sources":["/home/usuario/Documentos/GitHub/Strimo/src/content/pago/formulario.jsx"],"names":["React","useState","useEffect","useRef","firebase","useAuth","qr","useHistory","Register","img","moneda","history","ref","wallet","precio","setPrecio","preciobtc","precioeth","comprobante","currentUser","setTimeout","current","scrollIntoView","behavior","handleSubmit","e","createChat","firestore","collection","where","get","then","snapshot","match","forEach","doc","data","add","integrantes","email","invitacionDoc","de","usuarioInvitado","tiempo","Timestamp","now","toMillis","chatId","id","push","preventDefault","width","Precio"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,OAAOC,EAAP,MAAe,+BAAf;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AACA,eAAe,SAASC,QAAT,CAAkB;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAlB,EAAmC;AAAA;;AAChD,QAAMC,OAAO,GAAGJ,UAAU,EAA1B;AACA,QAAMK,GAAG,GAAGT,MAAM,CAAC,IAAD,CAAlB;AACA,QAAMU,MAAM,GAAG,sDAAf;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBd,QAAQ,CAAC,EAAD,CAApC;AACA,QAAMe,SAAS,GAAG,YAAlB;AACA,QAAMC,SAAS,GAAG,aAAlB;AACA,QAAMC,WAAW,GAAG,aAApB;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAkBd,OAAO,EAA/B;AACAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,MAAM,KAAK,KAAf,EAAsB;AACpBK,MAAAA,SAAS,CAACC,SAAD,CAAT;AACD,KAFD,MAEO;AACLD,MAAAA,SAAS,CAACE,SAAD,CAAT;AACD;;AACDG,IAAAA,UAAU,CAAC,MAAM;AACfR,MAAAA,GAAG,CAACS,OAAJ,CAAYC,cAAZ,CAA2B;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAA3B;AACD,KAFS,EAEP,GAFO,CAAV;AAGD,GATQ,EASN,CAACb,MAAD,CATM,CAAT;;AAUA,QAAMc,YAAY,GAAIC,CAAD,IAAO;AAC1B,UAAMC,UAAU,GAAGtB,QAAQ,CAACuB,SAAT,GAAqBC,UAArB,CAAgC,MAAhC,CAAnB;AACAF,IAAAA,UAAU,CACPG,KADH,CACS,aADT,EACwB,IADxB,EAC8BX,WAD9B,EAEGY,GAFH,GAGGC,IAHH,CAGSC,QAAD,IAAc;AAClB,UAAIC,KAAK,GAAG,EAAZ;AACAD,MAAAA,QAAQ,CAACE,OAAT,CAAkBC,GAAD,IAAS;AACxBF,QAAAA,KAAK,GAAGE,GAAG,CAACC,IAAJ,EAAR;AACD,OAFD;;AAGA,UAAI,CAACH,KAAL,EAAY;AACVP,QAAAA,UAAU,CACPW,GADH,CACO;AACHnB,UAAAA,WAAW,EAAEA,WADV;AAEHoB,UAAAA,WAAW,EAAE,CAACnB,WAAW,CAACoB,KAAb;AAFV,SADP,EAKGR,IALH,CAKQ,MAAOI,GAAP,IAAe;AACnB,gBAAMK,aAAa,GAAGpC,QAAQ,CAC3BuB,SADmB,GAEnBC,UAFmB,CAER,YAFQ,CAAtB;AAGA,gBAAMY,aAAa,CAACH,GAAd,CAAkB;AACtBI,YAAAA,EAAE,EAAEtB,WAAW,CAACoB,KADM;AAEtBrB,YAAAA,WAAW,EAAEA,WAFS;AAGtBwB,YAAAA,eAAe,EAAE,EAHK;AAItBC,YAAAA,MAAM,EACJvC,QAAQ,CAACuB,SAAT,CAAmBiB,SAAnB,CAA6BC,GAA7B,GAAmCC,QAAnC,KACA,OAAO,EAAP,GAAY,EAAZ,GAAiB,CANG;AAOtBC,YAAAA,MAAM,EAAEZ,GAAG,CAACa;AAPU,WAAlB,CAAN;AASArC,UAAAA,OAAO,CAACsC,IAAR,CAAc,eAAc/B,WAAY,EAAxC;AACD,SAnBH;AAoBD;AACF,KA9BH;AA+BAO,IAAAA,CAAC,CAACyB,cAAF;AACD,GAlCD;;AAmCA,sBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA,4BACE;AAAK,MAAA,GAAG,EAAC,EAAT;AAAY,MAAA,GAAG,EAAEzC,GAAjB;AAAsB,MAAA,KAAK,EAAC;AAA5B;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAI,MAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAM,MAAA,QAAQ,EAAEe,YAAhB;AAA8B,MAAA,SAAS,EAAC,aAAxC;AAAA,8BACE;AAAK,QAAA,GAAG,EAAC,EAAT;AAAY,QAAA,GAAG,EAAElB,EAAjB;AAAqB,QAAA,KAAK,EAAC;AAA3B;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,KAAK,EAAEO,MAA1B;AAAkC,QAAA,QAAQ,EAAE;AAA5C;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE,QAAC,MAAD;AAAQ,QAAA,MAAM,EAAEC;AAAhB;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAC,UAFZ;AAGE,QAAA,KAAK,EAAE;AAAEqC,UAAAA,KAAK,EAAE;AAAT,SAHT;AAIE,QAAA,GAAG,EAAEvC,GAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA,YAHF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAmBD;;GAzEuBJ,Q;UACND,U,EAOQF,O;;;KARFG,Q;;AA0ExB,MAAM4C,MAAM,GAAG,CAAC;AAAEtC,EAAAA;AAAF,CAAD,KAAgB;AAC7B,sBACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAA,gBAAKA;AAAL;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAMD,CAPD;;MAAMsC,M","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport firebase from \"../../utils/firebase\";\r\nimport { useAuth } from \"../context/authContext\";\r\nimport qr from \"../images/qr-code-example.png\";\r\nimport { useHistory } from \"react-router-dom\";\r\nexport default function Register({ img, moneda }) {\r\n  const history = useHistory();\r\n  const ref = useRef(null);\r\n  const wallet = \"6vuw9DbaenYyMjuBDn8bkH3Ny23b4s6mPPLq4dbuxZPDm EVo4TM\";\r\n  const [precio, setPrecio] = useState(\"\");\r\n  const preciobtc = \"0.0013 BTC\";\r\n  const precioeth = \"0.00042 ETH\";\r\n  const comprobante = \"12345678101\";\r\n  const { currentUser } = useAuth();\r\n  useEffect(() => {\r\n    if (moneda === \"btc\") {\r\n      setPrecio(preciobtc);\r\n    } else {\r\n      setPrecio(precioeth);\r\n    }\r\n    setTimeout(() => {\r\n      ref.current.scrollIntoView({ behavior: \"smooth\" });\r\n    }, 500);\r\n  }, [moneda]);\r\n  const handleSubmit = (e) => {\r\n    const createChat = firebase.firestore().collection(\"Chat\");\r\n    createChat\r\n      .where(\"comprobante\", \"==\", comprobante)\r\n      .get()\r\n      .then((snapshot) => {\r\n        let match = \"\";\r\n        snapshot.forEach((doc) => {\r\n          match = doc.data();\r\n        });\r\n        if (!match) {\r\n          createChat\r\n            .add({\r\n              comprobante: comprobante,\r\n              integrantes: [currentUser.email],\r\n            })\r\n            .then(async (doc) => {\r\n              const invitacionDoc = firebase\r\n                .firestore()\r\n                .collection(\"Invitacion\");\r\n              await invitacionDoc.add({\r\n                de: currentUser.email,\r\n                comprobante: comprobante,\r\n                usuarioInvitado: \"\",\r\n                tiempo:\r\n                  firebase.firestore.Timestamp.now().toMillis() +\r\n                  1000 * 60 * 60 * 5,\r\n                chatId: doc.id,\r\n              });\r\n              history.push(`/invitacion/${comprobante}`);\r\n            });\r\n        }\r\n      });\r\n    e.preventDefault();\r\n  };\r\n  return (\r\n    <div className=\"form-pago\">\r\n      <img alt=\"\" src={img} width=\"100px\"></img>\r\n      <h3 className=\"title\">Formulario de pago</h3>\r\n      <form onSubmit={handleSubmit} className=\"form-layout\">\r\n        <img alt=\"\" src={qr} width=\"250px\"></img>\r\n        <input type=\"text\" value={wallet} readOnly={true} />\r\n        <Precio precio={precio} />\r\n        <button\r\n          type=\"Submit\"\r\n          className=\"primario\"\r\n          style={{ width: \"30%\" }}\r\n          ref={ref}\r\n        >\r\n          Entrar\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nconst Precio = ({ precio }) => {\r\n  return (\r\n    <div className=\"precio\">\r\n      <h4>Precio: </h4>\r\n      <h2>{precio}</h2>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}