{"ast":null,"code":"var _jsxFileName = \"/home/usuario/Documentos/GitHub/Strimo/src/content/imagen_perfil/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport firebase from \"../../utils/firebase\";\nimport blankImaage from \"../images/depositphotos_171453724-stock-illustration-default-avatar-profile-icon-grey.jpg\";\nimport { useAuth } from \"../context/authContext\";\nimport \"./imagen-perfil.css\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Index() {\n  _s();\n\n  const history = useHistory();\n  const {\n    currentUser\n  } = useAuth();\n  const storage = firebase.storage();\n  const allInputs = {\n    imgUrl: \"\"\n  };\n  const [imageAsFile, setImageAsFile] = useState(\"\");\n  const [imageAsUrl, setImageAsUrl] = useState(allInputs);\n  useEffect(() => {\n    storage.ref(`users/${currentUser.uid}/`).child(`pfp${currentUser.uid}`).getDownloadURL().then(fireBaseUrl => {\n      setImageAsUrl(prevObject => ({ ...prevObject,\n        imgUrl: fireBaseUrl\n      }));\n    });\n  }, []);\n  console.log(!imageAsUrl, imageAsUrl);\n\n  const handleImageAsFile = e => {\n    if (e.target.files && e.target.files[0]) {\n      let reader = new FileReader();\n\n      reader.onload = e => {\n        setImageAsUrl({\n          imgUrl: e.target.result\n        });\n        console.log(imageAsUrl);\n      };\n\n      reader.readAsDataURL(e.target.files[0]);\n    }\n\n    const image = e.target.files[0];\n    setImageAsFile(imageFile => image);\n  };\n\n  const handleFireBaseUpload = async e => {\n    e.preventDefault();\n\n    if (imageAsFile === \"\") {\n      console.error(`not an image, the image file is a ${typeof imageAsFile}`);\n    }\n\n    const uploadTask = storage.ref(`/users/${currentUser.uid}/pfp${currentUser.uid}`).put(imageAsFile);\n    uploadTask.on(\"state_changed\", snapShot => {\n      console.log(snapShot);\n    }, err => {\n      console.log(err);\n    }, () => {// storage\n      //   .ref(`users/${currentUser.uid}/`)\n      //   .child(imageAsFile.name)\n      //   .getDownloadURL()\n      //   .then((fireBaseUrl) => {\n      //     setImageAsUrl((prevObject) => ({\n      //       ...prevObject,\n      //       imgUrl: fireBaseUrl,\n      //     }));\n      //   });\n    });\n    uploadTask.then(doc => {\n      console.log(\"xd\");\n      setTimeout(() => {\n        history.push(\"/\");\n      }, 3000);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"degradado fondo\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form-perfil\",\n      onSubmit: handleFireBaseUpload,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Carga una imagen de perfil!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-form\",\n        children: [imageAsUrl.imgUrl == \"\" ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: blankImaage,\n          width: \"100px\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          src: imageAsUrl.imgUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"image-input\",\n          type: \"file\",\n          onChange: handleImageAsFile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"primario\",\n        children: \"Subir Imagen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Index, \"h0mmA32tG/6WTbwNkPZfDesxia8=\", false, function () {\n  return [useHistory, useAuth];\n});\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/home/usuario/Documentos/GitHub/Strimo/src/content/imagen_perfil/index.jsx"],"names":["React","useEffect","useState","firebase","blankImaage","useAuth","useHistory","Index","history","currentUser","storage","allInputs","imgUrl","imageAsFile","setImageAsFile","imageAsUrl","setImageAsUrl","ref","uid","child","getDownloadURL","then","fireBaseUrl","prevObject","console","log","handleImageAsFile","e","target","files","reader","FileReader","onload","result","readAsDataURL","image","imageFile","handleFireBaseUpload","preventDefault","error","uploadTask","put","on","snapShot","err","doc","setTimeout","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport firebase from \"../../utils/firebase\";\r\nimport blankImaage from \"../images/depositphotos_171453724-stock-illustration-default-avatar-profile-icon-grey.jpg\";\r\nimport { useAuth } from \"../context/authContext\";\r\nimport \"./imagen-perfil.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\nfunction Index() {\r\n  const history = useHistory();\r\n  const { currentUser } = useAuth();\r\n  const storage = firebase.storage();\r\n  const allInputs = { imgUrl: \"\" };\r\n  const [imageAsFile, setImageAsFile] = useState(\"\");\r\n  const [imageAsUrl, setImageAsUrl] = useState(allInputs);\r\n  useEffect(() => {\r\n    storage\r\n      .ref(`users/${currentUser.uid}/`)\r\n      .child(`pfp${currentUser.uid}`)\r\n      .getDownloadURL()\r\n      .then((fireBaseUrl) => {\r\n        setImageAsUrl((prevObject) => ({\r\n          ...prevObject,\r\n          imgUrl: fireBaseUrl,\r\n        }));\r\n      });\r\n  }, []);\r\n  console.log(!imageAsUrl, imageAsUrl);\r\n  const handleImageAsFile = (e) => {\r\n    if (e.target.files && e.target.files[0]) {\r\n      let reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        setImageAsUrl({ imgUrl: e.target.result });\r\n        console.log(imageAsUrl);\r\n      };\r\n      reader.readAsDataURL(e.target.files[0]);\r\n    }\r\n    const image = e.target.files[0];\r\n    setImageAsFile((imageFile) => image);\r\n  };\r\n  const handleFireBaseUpload = async (e) => {\r\n    e.preventDefault();\r\n    if (imageAsFile === \"\") {\r\n      console.error(`not an image, the image file is a ${typeof imageAsFile}`);\r\n    }\r\n    const uploadTask = storage\r\n      .ref(`/users/${currentUser.uid}/pfp${currentUser.uid}`)\r\n      .put(imageAsFile);\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      (snapShot) => {\r\n        console.log(snapShot);\r\n      },\r\n      (err) => {\r\n        console.log(err);\r\n      },\r\n      () => {\r\n        // storage\r\n        //   .ref(`users/${currentUser.uid}/`)\r\n        //   .child(imageAsFile.name)\r\n        //   .getDownloadURL()\r\n        //   .then((fireBaseUrl) => {\r\n        //     setImageAsUrl((prevObject) => ({\r\n        //       ...prevObject,\r\n        //       imgUrl: fireBaseUrl,\r\n        //     }));\r\n        //   });\r\n      }\r\n    );\r\n    uploadTask.then((doc) => {\r\n      console.log(\"xd\");\r\n      setTimeout(() => {\r\n        history.push(\"/\");\r\n      }, 3000);\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"degradado fondo\">\r\n      <form className=\"form-perfil\" onSubmit={handleFireBaseUpload}>\r\n        <h1>Carga una imagen de perfil!</h1>\r\n        <div className=\"file-form\">\r\n          {imageAsUrl.imgUrl == \"\" ? (\r\n            <img src={blankImaage} width=\"100px\" />\r\n          ) : (\r\n            <img src={imageAsUrl.imgUrl} />\r\n          )}\r\n          <input\r\n            className=\"image-input\"\r\n            type=\"file\"\r\n            onChange={handleImageAsFile}\r\n          />\r\n        </div>\r\n        <button className=\"primario\">Subir Imagen</button>\r\n      </form>\r\n      {/* <img src={imageAsUrl.imgUrl} alt=\"image tag\" /> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Index;\r\n"]},"metadata":{},"sourceType":"module"}