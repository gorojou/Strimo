{"ast":null,"code":"var _jsxFileName = \"/home/usuario/Documentos/GitHub/Strimo/src/content/chatstest/chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState, useEffect } from \"react\";\nimport firebase from \"../../utils/firebase\";\nimport Mensajes from \"./mensaje\";\nimport { useAuth } from \"../context/authContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Chat({\n  infor,\n  setDocu\n}) {\n  _s();\n\n  const {\n    currentUser\n  } = useAuth();\n  const [menu, setMenu] = useState([]);\n  const mensajeRef = useRef();\n  const scrollRef = useRef();\n  const [info, setInfo] = useState([]);\n  const chatMensajes = firebase.firestore().collection(\"Chat\");\n\n  const toggler = i => {\n    let bol = menu;\n    bol[i] = !bol[i];\n    setMenu([...bol]);\n  };\n\n  const handleMensaje = async id => {\n    await chatMensajes.doc(id).collection(\"Mensajes\").add({\n      texto: mensajeRef.current.value,\n      email: currentUser.email,\n      nombre: currentUser.displayName,\n      timeCreated: firebase.firestore.FieldValue.serverTimestamp()\n    });\n    goToBottom();\n    mensajeRef.current.value = \"\";\n  };\n\n  const goToBottom = () => {\n    scrollRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  const removeChat = i => {\n    let bol = info;\n    bol.splice(i, 1);\n    setDocu([...bol]);\n  }; //UseEffcet\n\n\n  useEffect(() => {\n    infor.map(() => {\n      setMenu([...menu, true]);\n    });\n  }, [infor]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: infor.map((doc, i) => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: menu[i] ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat chat-border\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-header \",\n            onClick: () => toggler(i),\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: doc.artista\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mensajes\",\n            children: [/*#__PURE__*/_jsxDEV(Mensajes, {\n              id: doc.id,\n              goToBottom: goToBottom\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bottom\",\n              ref: scrollRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: e => {\n                e.preventDefault();\n                handleMensaje(doc.id);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Di algo a `Aca nombre` \",\n                ref: mensajeRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 64,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                style: {\n                  width: \"10%\",\n                  margin: \"5px\"\n                },\n                type: \"submit\",\n                className: \"primario oyt\",\n                children: \"Enviar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-min chat-header chat-border\",\n          onClick: () => toggler(i),\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: doc.artista\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"close-chat\",\n            onClick: e => {\n              e.preventDefault();\n              removeChat(i);\n            },\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this)\n      }, void 0, false);\n    })\n  }, void 0, false);\n}\n\n_s(Chat, \"N1zYBia8+5Xh6JTGHGWm7wCaaEw=\", false, function () {\n  return [useAuth];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/home/usuario/Documentos/GitHub/Strimo/src/content/chatstest/chat.jsx"],"names":["React","useRef","useState","useEffect","firebase","Mensajes","useAuth","Chat","infor","setDocu","currentUser","menu","setMenu","mensajeRef","scrollRef","info","setInfo","chatMensajes","firestore","collection","toggler","i","bol","handleMensaje","id","doc","add","texto","current","value","email","nombre","displayName","timeCreated","FieldValue","serverTimestamp","goToBottom","scrollIntoView","behavior","removeChat","splice","map","artista","e","preventDefault","width","margin"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport firebase from \"../../utils/firebase\";\r\nimport Mensajes from \"./mensaje\";\r\nimport { useAuth } from \"../context/authContext\";\r\nfunction Chat({ infor, setDocu }) {\r\n  const { currentUser } = useAuth();\r\n  const [menu, setMenu] = useState([]);\r\n  const mensajeRef = useRef();\r\n  const scrollRef = useRef();\r\n  const [info, setInfo] = useState([]);\r\n  const chatMensajes = firebase.firestore().collection(\"Chat\");\r\n  const toggler = (i) => {\r\n    let bol = menu;\r\n    bol[i] = !bol[i];\r\n    setMenu([...bol]);\r\n  };\r\n  const handleMensaje = async (id) => {\r\n    await chatMensajes.doc(id).collection(\"Mensajes\").add({\r\n      texto: mensajeRef.current.value,\r\n      email: currentUser.email,\r\n      nombre: currentUser.displayName,\r\n      timeCreated: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n\r\n    goToBottom();\r\n    mensajeRef.current.value = \"\";\r\n  };\r\n  const goToBottom = () => {\r\n    scrollRef.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n  const removeChat = (i) => {\r\n    let bol = info;\r\n    bol.splice(i, 1);\r\n    setDocu([...bol]);\r\n  };\r\n\r\n  //UseEffcet\r\n  useEffect(() => {\r\n    infor.map(() => {\r\n      setMenu([...menu, true]);\r\n    });\r\n  }, [infor]);\r\n  return (\r\n    <>\r\n      {infor.map((doc, i) => {\r\n        return (\r\n          <>\r\n            {menu[i] ? (\r\n              <div className=\"chat chat-border\">\r\n                <div className=\"chat-header \" onClick={() => toggler(i)}>\r\n                  <h4>{doc.artista}</h4>\r\n                </div>\r\n                <div className=\"mensajes\">\r\n                  <Mensajes id={doc.id} goToBottom={goToBottom} />\r\n                  <div className=\"bottom\" ref={scrollRef}></div>\r\n                </div>\r\n                <div className=\"input\">\r\n                  <form\r\n                    onSubmit={(e) => {\r\n                      e.preventDefault();\r\n                      handleMensaje(doc.id);\r\n                    }}\r\n                  >\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"Di algo a `Aca nombre` \"\r\n                      ref={mensajeRef}\r\n                    />\r\n                    <button\r\n                      style={{ width: \"10%\", margin: \"5px\" }}\r\n                      type=\"submit\"\r\n                      className=\"primario oyt\"\r\n                    >\r\n                      Enviar\r\n                    </button>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div\r\n                className=\"chat-min chat-header chat-border\"\r\n                onClick={() => toggler(i)}\r\n              >\r\n                <h4>{doc.artista}</h4>\r\n                <div\r\n                  className=\"close-chat\"\r\n                  onClick={(e) => {\r\n                    e.preventDefault();\r\n                    removeChat(i);\r\n                  }}\r\n                >\r\n                  X\r\n                </div>\r\n              </div>\r\n            )}\r\n          </>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"]},"metadata":{},"sourceType":"module"}